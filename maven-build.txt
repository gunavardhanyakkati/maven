# Corrected and Improved SE Lab Internal Solutions (All Weeks)

This document contains **corrected, clean, and beginner‑friendly steps** for all labs (Weeks 8–12) covering Jenkins, Tomcat, Scripted Pipeline, Minikube, Nagios, Webhooks, Email Notifications, AWS EC2, Docker, and Kubernetes.

All errors from the original file have been fixed.

---

##  WEEK 8 — Jenkins Freestyle Automation (Fixed & Simplified)

### **A. Maven Java Project – Build + Test + Pipeline View**

### **1. Jenkins Java Build Job**

* **New Item → MavenJava_Build → Freestyle project**
* Source Code Management → Git → Repo URL
* Branches to build: `*/main`
* Build Steps:

  * Invoke Maven (MAVEN_HOME) → Goals: `clean`
  * Invoke Maven (MAVEN_HOME) → Goals: `install`
* Post-build:

  * Archive artifacts: `**/*`
  * Build other projects → *MavenJava_Test* (Trigger: Only if build is stable)
* Save.

### **2. Jenkins Java Test Job**

* **New Item → MavenJava_Test → Freestyle**
* Build Environment: *Delete workspace before build starts*
* Build Steps:

  * Copy artifacts from: *MavenJava_Build*, Artifacts: `**/*`
  * Invoke Maven → `test`
* Post-build: Archive: `**/*`
* Save.

### **3. Pipeline View**

* Dashboard → **+ New View** → Build Pipeline View
* Initial Job: **MavenJava_Build**
* Save.

---

##  WEEK 9 — Jenkins Scripted Pipeline (Corrected)

### **New Item → jenkins_script → Pipeline**

### **Correct Script:**

```
pipeline {
    agent any

    tools {
        maven 'MAVEN_HOME'
    }

    stages {

        stage('Checkout from GitHub') {
            steps {
                deleteDir()
                git url: 'https://github.com/<your-repo>.git', branch: 'main'
            }
        }

        stage('Clean') {
            steps {
                bat 'mvn clean'
            }
        }

        stage('Install') {
            steps {
                bat 'mvn install'
            }
        }

        stage('Test') {
            steps {
                bat 'mvn test'
            }
        }

        stage('Package') {
            steps {
                bat 'mvn package'
            }
        }

        stage('Final Output') {
            steps {
                echo "Build Completed Successfully"
            }
        }
    }
}
```

### Trigger (Optional):

`Build periodically: * * * * *`

---

##  WEEK 10 — Minikube + Nagios (Corrected)

### **A. Minikube – Nginx Deployment**

#### **1. Install and Start Minikube**

```
curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-windows-amd64.exe
minikube start --driver=docker
```

#### **2. Verify Cluster**

```
minikube status
minikube kubectl -- get pods -A
```

#### **3. Create Deployment**

```
kubectl create deployment mynginx --image=nginx
kubectl get deployments
kubectl get pods
```

#### **4. Expose as NodePort**

```
kubectl expose deployment mynginx --type=NodePort --port=80 --target-port=80
kubectl get svc
```

#### **5. Scale Pods**

```
kubectl scale deployment mynginx --replicas=4
```

#### **6. Access Application**

```
kubectl port-forward svc/mynginx 8081:80
```

Open: **[http://localhost:8081](http://localhost:8081)**

If port-forward fails:

```
minikube tunnel
minikube service mynginx --url
```

#### **7. Cleanup**

```
kubectl delete deployment mynginx
kubectl delete service mynginx
minikube stop
minikube delete
```

---

### **B. Nagios Monitoring using Docker**

#### **1. Pull Image**

```
docker pull jasonrivers/nagios:latest
```

#### **2. Run Nagios**

```
docker run --name nagiosdemo -p 8888:80 jasonrivers/nagios:latest
```

#### **3. Access UI**

Open: **[http://localhost:8888](http://localhost:8888)**

* username: `nagiosadmin`
* password: `nagios`

#### **4. Stop / Remove**

```
docker stop nagiosdemo
docker rm nagiosdemo
docker rmi jasonrivers/nagios:latest
```

---

##  WEEK 11 — GitHub Webhook + Jenkins Email Notifications

### **A. GitHub Webhook Integration (Corrected)**

#### **1. Setup ngrok**

```
ngrok config add-authtoken <your_token>
ngrok http 8080
```

**NOT:** `8080/1` (this was wrong in original file)

Copy generated URL:

```
https://<random>.ngrok-free.dev
```

#### **2. Add Webhook in GitHub → Settings → Webhooks**

Payload URL:

```
https://<ngrok-url>/github-webhook/
```

Content type: `application/json`
Event: **Just push event**

#### **3. Jenkins Job Trigger**

* Open Jenkins → job → Configure
* Tick: **GitHub hook trigger for GITScm polling**

---

### **B. Jenkins Email Notification (Corrected)**

#### **1. Generate Gmail App Password** (2-step verification required)

#### **2. Install Jenkins Plugin:** Email Extension Plugin

#### **3. Configure Global Settings:**

```
SMTP Server: smtp.gmail.com
Port: 465
SSL: Enabled
Username: your Gmail
Password: your app password
```

#### **4. In Job → Post-build Action:** Editable Email Notification

---

##  WEEK 12 — AWS EC2 + Docker Deployment (Corrected)

### **A. Create EC2 Instance**

* Launch instance → Ubuntu → t2.micro
* Create key pair (.pem)
* Allow: SSH, HTTP, HTTPS
* Launch

### **B. SSH into Instance (Corrected Step)**

```
chmod 400 MyKey.pem
ssh -i "MyKey.pem" ubuntu@<public-ip>
```

### **C. Install Dependencies**

```
sudo apt update
sudo apt-get install docker.io\sudo apt install git
sudo apt install nano
```

### **D. Deploy index.html using Docker (Corrected)**

```
git clone <repo>
cd repo
nano Dockerfile
```

Add:

```
FROM nginx:alpine
COPY . /usr/share/nginx/html/
EXPOSE 80
CMD ["nginx", "-g", "daemon off;"]
```

Build & Run:

```
sudo docker build -t mywebapp .
sudo docker run -d -p 80:80 mywebapp
```

Visit:

```
http://<EC2-public-ip>
```

If not working: Add inbound rule for port **80** or **9090**.

---

#  ALL ERRORS FIXED

This file now contains:

* Corrected commands
* Fixed typos (mynginx, Tomcat URL, docker rmi)
* Missing steps added (chmod 400, Jenkinsfile corrections)
* Beginner-friendly flow

If you want, I can also create:
➡ A **separate file** with only *exam-ready answers* for **SET‑1** and **SET‑2**.

Just tell me: **"Make exam answers file"**.

# SE LAB INTERNAL – COMPLETE ANSWER SHEET (SET–1 & SET–2)

### **Author: Y. Gunavardhan**

---

# **SET–1 – INTERNAL LAB ANSWERS**

---

# **Q1. Jenkins Pipeline for a Java Project (25 Marks)**

### **Scenario:** Automate build of a Java Maven project using Jenkins Pipeline.

## **➡ Step-by-Step Procedure**

### **1. Create Jenkins Pipeline Job**

* Open Jenkins → *New Item*
* Name: `JavaPipeline`
* Select **Pipeline** → OK

### **2. Configure GitHub Repository**

Pipeline → Definition: *Pipeline script* → Paste script below.

---

## **▶ Jenkinsfile (Scripted Pipeline)**

```
pipeline {
    agent any

    tools {
        maven 'MAVEN_HOME'
    }

    stages {
        stage('Checkout from GitHub') {
            steps {
                deleteDir()
                git url: 'https://github.com/<your-username>/<maven-java-project>.git', branch: 'main'
            }
        }

        stage('Clean') {
            steps { bat 'mvn clean' }
        }

        stage('Install') {
            steps { bat 'mvn install' }
        }

        stage('Test') {
            steps { bat 'mvn test' }
        }

        stage('Package') {
            steps { bat 'mvn package' }
        }

        stage('Final Output') {
            steps { echo "BUILD SUCCESS – Pipeline Completed" }
        }
    }
}
```

---

### **3. Create Pipeline View**

* Dashboard → +New View → Build Pipeline View
* Initial Job: `JavaPipeline`

### **4. Expected Output**

* BUILD SUCCESS in console
* All stages visible
* GitHub → Clean → Install → Test → Package → Final Output

---

# **Q2. Minikube – Nginx Deployment (25 Marks)**

## **➡ Step-by-Step Commands**

### **1. Start Minikube**

```
minikube start --driver=docker
```

### **2. Create Nginx Deployment**

```
kubectl create deployment mynginx --image=nginx
```

### **3. Expose Service on Port 8090**

```
kubectl expose deployment mynginx --type=NodePort --port=80 --target-port=80
```

Find port:

```
kubectl get svc
```

If NodePort = 30009 → Browser: `localhost:30009`

### **4. Scale Pods**

```
kubectl scale deployment mynginx --replicas=4
```

### **5. Verify**

```
kubectl get pods
kubectl get svc
```

### **6. Alternative Access**

```
kubectl port-forward svc/mynginx 8090:80
```

Browser → **[http://localhost:8090](http://localhost:8090)**

---

# **Q3. Nagios Monitoring Tool (25 Marks)**

### **1. Pull Official Nagios Image**

```
docker pull jasonrivers/nagios:latest
```

### **2. Run Container**

```
docker run --name nagiosdemo -p 8888:80 jasonrivers/nagios:latest
```

### **3. Access Dashboard**

* Browser → `http://localhost:8888`
* username: `nagiosadmin`
* password: `nagios`

### **4. Monitor:**

* CPU Usage
* Memory Usage
* Service Uptime

### **5. Stop Container (Optional)**

```
docker stop nagiosdemo
docker rm nagiosdemo
docker rmi jasonrivers/nagios:latest
```

---

# **Q4. UML – ATM Withdrawal Sequence Diagram (25 Marks)**

### **Actors & Objects:**

* Customer
* ATM Machine
* Bank Server
* Cash Dispenser
* Receipt Printer

### **Sequence of Messages:**

1. Customer → ATM: *Insert Card*
2. ATM → Customer: *Enter PIN*
3. ATM → Bank Server: *Validate PIN*
4. Bank Server → ATM: *Validation Status*
5. Customer → ATM: *Enter Withdrawal Amount*
6. ATM → Bank Server: *Check Balance*
7. Bank Server → ATM: *Sufficient / Insufficient Funds*
8. ATM → Cash Dispenser: *Dispense Cash*
9. ATM → Bank Server: *Update Balance*
10. ATM → Receipt Printer: *Print Receipt*
11. ATM → Customer: *Receipt + Cash Delivered*

(If funds insufficient → Display Error Message)

---

# **SET–2 – INTERNAL LAB ANSWERS**

---

# **Q1. Jenkins Pipeline for a Web Project (25 Marks)**

### **Goal:** Automate build + deploy of a Maven Web App onto Tomcat.

## **➡ Step-by-Step Solution**

### **1. Install Tomcat**

* Download Tomcat 9
* Extract to: `C:/tomcat9`
* Run:

```
startup.bat
```

### **2. Configure Tomcat User**

Edit `conf/tomcat-users.xml`:

```
<role rolename="manager-script"/>
<role rolename="manager-gui"/>
<user username="tomcat" password="Tomcat@123" roles="manager-script,manager-gui"/>
```

Restart Tomcat.

---

## **3. Create Jenkins Pipeline Job**

* Jenkins → New Item → `WebAppPipeline` → Pipeline

## **4. Jenkinsfile (Required Output)**

```
pipeline {
    agent any

    tools {
        maven 'MAVEN_HOME'
    }

    environment {
        TOMCAT_URL = 'http://localhost:8080'
        USER = 'tomcat'
        PASS = 'Tomcat@123'
    }

    stages {

        stage('Clone Code') {
            steps {
                git url: 'https://github.com/<your-user>/<webapp>.git', branch: 'main'
            }
        }

        stage('Build WAR') {
            steps { bat 'mvn clean package' }
        }

        stage('Deploy to Tomcat') {
            steps {
                script {
                    def war = bat(script: 'dir /B target\\*.war', returnStdout: true).trim()
                    bat "curl -u %USER%:%PASS% -T target/${war} %TOMCAT_URL%/manager/text/deploy?path=/webapp&update=true"
                }
            }
        }
    }
}
```

---

## **5. Create Pipeline View**

* Dashboard → +New View → Pipeline View
* Select job → `WebAppPipeline`

## **6. Final Output**

* Jenkins pipeline view showing all stages
* Deployment success
* Proof:

```
http://localhost:8080/webapp/
```

---

# **Q2. Minikube – Nginx Deployment (Same as SET–1 Q2)**

✔ Already included — identical steps.

---

# **Q3. Nagios Monitoring Tool (Same as SET–1 Q3)**

✔ Already included — identical steps.

---

# **Q4. UML – ATM Withdrawal (Same as SET–1 Q4)**

✔ Already included.

---

#  **END OF EXAM ANSWER FILE**

This document contains complete, corrected, exam-ready answers for **both Set–1 and Set–2**.
